"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect, useState } from "react";
import cls from "../../../../fn/class-names/index.js";
import { concat, fnVoid } from "nextjs-tools";
import ImgDown from "web-asset/svg/regular/fi-rr-caret-down.svg";
import ImgUp from "web-asset/svg/regular/fi-rr-caret-up.svg";
import Image from "next/image";
import { useDropdown } from "../../../../index.js";
export default function ({ items = [], value = "", onChange = fnVoid, className }) {
    const [idx, setIdx] = useState(getIndex(items, value));
    const [dropdown] = useDropdown(({ width, onClose }) => (_jsx(Dropdown, { width: width, items: items, idx: idx, onChangeIdx: setIdx, onClose: onClose })), {
        className,
    });
    useEffect(() => {
        setIdx(getIndex(items, value));
    }, [value]);
    useEffect(() => {
        onChange(items[idx].value);
    }, [idx]);
    if (items.length === 0)
        return null;
    const item = items[idx];
    return dropdown((isOpen) => (_jsxs("div", { className: concat(cls.height.input, "border border-(--border) rounded p-2", "flex items-center text-sm text-(--info)", "min-w-20", isOpen ? cls.background.input : ""), children: [item.label, _jsx("div", { className: "grow" }), _jsx(Image, { className: "filter-(--info-filter) ml-2", src: isOpen ? ImgUp : ImgDown, alt: "down", width: 20, height: 20 })] })));
}
function getIndex(items, value) {
    const idx = items.findIndex((v) => v.value === value);
    return idx === -1 ? 0 : idx;
}
function Dropdown({ width, items, onChangeIdx, idx, onClose }) {
    return (_jsx("div", { className: "pt-2", style: { width }, children: _jsx("div", { className: concat("border border-(--border) rounded bg-white p-1"), children: items.map((v, key) => (_jsx("button", { className: concat("flex hover:bg-(--select) w-full p-1 rounded text-(--info) text-sm", idx === key ? "font-extrabold" : ""), type: "button", onClick: () => {
                    onChangeIdx(key);
                    onClose();
                }, children: v.label }, key))) }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcC9pbnB1dC9lbGVtL2Ryb3Bkb3duL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBQ2IsT0FBYyxFQUFZLFNBQVMsRUFBRSxRQUFRLEVBQUMsTUFBTSxPQUFPLENBQUM7QUFDNUQsT0FBTyxHQUFHLE1BQU0sNEJBQTRCLENBQUM7QUFDN0MsT0FBTyxFQUFDLE1BQU0sRUFBa0IsTUFBTSxFQUFDLE1BQU0sY0FBYyxDQUFDO0FBQzVELE9BQU8sT0FBTyxNQUFNLDRDQUE0QyxDQUFDO0FBQ2pFLE9BQU8sS0FBSyxNQUFNLDBDQUEwQyxDQUFDO0FBQzdELE9BQU8sS0FBSyxNQUFNLFlBQVksQ0FBQztBQUMvQixPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBY2pDLE1BQU0sQ0FBQyxPQUFPLFdBQVcsRUFBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLEtBQUssR0FBRyxFQUFFLEVBQUUsUUFBUSxHQUFHLE1BQU0sRUFBRSxTQUFTLEVBQTJCO0lBQ3hHLE1BQU0sQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUN2RCxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsV0FBVyxDQUM3QixDQUFDLEVBQUMsS0FBSyxFQUFFLE9BQU8sRUFBQyxFQUFFLEVBQUUsQ0FBQyxDQUNyQixLQUFDLFFBQVEsSUFDUixLQUFLLEVBQUUsS0FBSyxFQUNaLEtBQUssRUFBRSxLQUFLLEVBQ1osR0FBRyxFQUFFLEdBQUcsRUFDUixXQUFXLEVBQUUsTUFBTSxFQUNuQixPQUFPLEVBQUUsT0FBTyxHQUNmLENBQ0YsRUFDRDtRQUNDLFNBQVM7S0FDVCxDQUNELENBQUM7SUFFRixTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2QsTUFBTSxD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