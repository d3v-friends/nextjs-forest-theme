"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect, useState } from "react";
import cls from "../../../../fn/class-names/index.js";
import { concat, fnVoid } from "nextjs-tools";
import ImgDown from "web-asset/svg/regular/fi-rr-caret-down.svg";
import ImgUp from "web-asset/svg/regular/fi-rr-caret-up.svg";
import Image from "next/image";
import { useDropdown } from "../../../../index.js";
export default function ({ items = [], value = "", onChange = fnVoid, className, }) {
    const [idx, setIdx] = useState(getIndex(items, value));
    const [dropdown] = useDropdown(({ width, onClose }) => (_jsx(Dropdown, { width: width, items: items, idx: idx, onChangeIdx: setIdx, onClose: onClose })), {
        className,
    });
    useEffect(() => {
        setIdx(getIndex(items, value));
    }, [value]);
    useEffect(() => {
        onChange(items[idx].value);
    }, [idx]);
    if (items.length === 0)
        return null;
    const item = items[idx];
    return dropdown((isOpen) => (_jsxs("div", { className: concat(cls.height.input, "border border-(--border) rounded p-2", "flex items-center text-sm text-(--info)", "min-w-20", isOpen ? cls.background.input : ""), children: [item.label, _jsx("div", { className: "grow" }), _jsx(Image, { className: "filter-(--info-filter) ml-2", src: isOpen ? ImgUp : ImgDown, alt: "down", width: 20, height: 20 })] })));
}
function getIndex(items, value) {
    const idx = items.findIndex((v) => v.value === value);
    return idx === -1 ? 0 : idx;
}
function Dropdown({ width, items, onChangeIdx, idx, onClose }) {
    return (_jsx("div", { className: "pt-2", style: { width }, children: _jsx("div", { className: concat("border border-(--border) rounded bg-white p-1"), children: items.map((v, key) => (_jsx("button", { className: concat("flex hover:bg-(--select) w-full p-1 rounded text-(--info) text-sm", idx === key ? "font-extrabold" : ""), type: "button", onClick: () => {
                    onChangeIdx(key);
                    onClose();
                }, children: v.label }, key))) }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcC9pbnB1dC9lbGVtL2Ryb3Bkb3duL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBQ2IsT0FBYyxFQUFZLFNBQVMsRUFBRSxRQUFRLEVBQUMsTUFBTSxPQUFPLENBQUM7QUFDNUQsT0FBTyxHQUFHLE1BQU0sNEJBQTRCLENBQUM7QUFDN0MsT0FBTyxFQUFDLE1BQU0sRUFBa0IsTUFBTSxFQUFDLE1BQU0sY0FBYyxDQUFDO0FBQzVELE9BQU8sT0FBTyxNQUFNLDRDQUE0QyxDQUFDO0FBQ2pFLE9BQU8sS0FBSyxNQUFNLDBDQUEwQyxDQUFDO0FBQzdELE9BQU8sS0FBSyxNQUFNLFlBQVksQ0FBQztBQUMvQixPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBY2pDLE1BQU0sQ0FBQyxPQUFPLFdBQTZCLEVBQzFDLEtBQUssR0FBRyxFQUF1QixFQUMvQixLQUFLLEdBQUcsRUFBTyxFQUNmLFFBQVEsR0FBRyxNQUFNLEVBQ2pCLFNBQVMsR0FDb0I7SUFDN0IsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxXQUFXLENBQzdCLENBQUMsRUFBQyxLQUFLLEVBQUUsT0FBTyxFQUFDLEVBQUUsRUFBRSxDQUFDLENBQ3JCLEtBQUMsUUFBUSxJQUNSLEtBQUssRUFBRSxLQUFLLEVBQ1osS0FBSyxFQUFFLEtBQUssRUFDWixHQUFHLEVBQUUsR0FBRyxFQUNSLFdBQVcsRUFBRSxNQUFNLEVBQ25CLE9BQU8sRUFBRSxPQUFPLEdBQ2YsQ0FDRixFQUNEO1FBQ0MsU0FBUztLQUNULENBQ0QsQ0FBQztJQUVGLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDZCxN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