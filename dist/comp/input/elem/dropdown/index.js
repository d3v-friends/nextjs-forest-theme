"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import cls from "../../../../fn/class-names/index.js";
import { concat, fnVoid } from "nextjs-tools";
import ImgDown from "web-asset/svg/regular/fi-rr-caret-down.svg";
import ImgUp from "web-asset/svg/regular/fi-rr-caret-up.svg";
import Image from "next/image";
import { useDropdown } from "../../../../index.js";
export default function ({ items = [], value = "", onChange = fnVoid, className, }) {
    const [idx, setIdx] = useState(getIndex(items, value));
    const [dropdown] = useDropdown(({ width, onClose }) => (_jsx(Dropdown, { width: width, items: items, idx: idx, onChangeIdx: (next) => {
            setIdx(next);
            onChange(items[next].value);
        }, onClose: onClose })), {
        className,
    });
    if (items.length === 0)
        return null;
    const item = items[idx];
    return dropdown((isOpen) => (_jsxs("div", { className: concat(cls.height.input, "border border-(--border) rounded p-2", "flex items-center text-sm text-(--info)", "min-w-20", isOpen ? cls.background.input : ""), children: [item.label, _jsx("div", { className: "grow" }), _jsx(Image, { className: "filter-(--info-filter) ml-2", src: isOpen ? ImgUp : ImgDown, alt: "down", width: 20, height: 20 })] })));
}
function getIndex(items, value) {
    const idx = items.findIndex((v) => v.value === value);
    return idx === -1 ? 0 : idx;
}
function Dropdown({ width, items, onChangeIdx, idx, onClose }) {
    return (_jsx("div", { className: "pt-2", style: { width }, children: _jsx("div", { className: concat("border border-(--border) rounded bg-white p-1"), children: items.map((v, key) => (_jsx("button", { className: concat("flex hover:bg-(--select) w-full p-1 rounded text-(--info) text-sm", idx === key ? "font-extrabold" : ""), type: "button", onClick: () => {
                    onChangeIdx(key);
                    onClose();
                }, children: v.label }, key))) }) }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvY29tcC9pbnB1dC9lbGVtL2Ryb3Bkb3duL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBQ2IsT0FBYyxFQUFZLFFBQVEsRUFBQyxNQUFNLE9BQU8sQ0FBQztBQUNqRCxPQUFPLEdBQUcsTUFBTSw0QkFBNEIsQ0FBQztBQUM3QyxPQUFPLEVBQUMsTUFBTSxFQUFrQixNQUFNLEVBQUMsTUFBTSxjQUFjLENBQUM7QUFDNUQsT0FBTyxPQUFPLE1BQU0sNENBQTRDLENBQUM7QUFDakUsT0FBTyxLQUFLLE1BQU0sMENBQTBDLENBQUM7QUFDN0QsT0FBTyxLQUFLLE1BQU0sWUFBWSxDQUFDO0FBQy9CLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFjakMsTUFBTSxDQUFDLE9BQU8sV0FBNkIsRUFDMUMsS0FBSyxHQUFHLEVBQXVCLEVBQy9CLEtBQUssR0FBRyxFQUFPLEVBQ2YsUUFBUSxHQUFHLE1BQU0sRUFDakIsU0FBUyxHQUNvQjtJQUM3QixNQUFNLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDdkQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFdBQVcsQ0FDN0IsQ0FBQyxFQUFDLEtBQUssRUFBRSxPQUFPLEVBQUMsRUFBRSxFQUFFLENBQUMsQ0FDckIsS0FBQyxRQUFRLElBQ1IsS0FBSyxFQUFFLEtBQUssRUFDWixLQUFLLEVBQUUsS0FBSyxFQUNaLEdBQUcsRUFBRSxHQUFHLEVBQ1IsV0FBVyxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2IsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixDQUFDLEVBQ0QsT0FBTyxFQUFFLE9BQU8sR0FDZixDQUNGLEVBQ0Q7UUFDQyxTQUFTO0tBQ1QsQ0FDRCxDQUFDO0lBRUYsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUVwQyxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDeEIsT0FBTyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQzNCLGVBQ0MsU0FBUyxFQUFFLE1BQU0sQ0FDaEIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQ2hCLHNDQUFzQyxFQUN0Qyx5Q0FBeUMsRUFDekMsVUFBVSxFQUNWLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FDbEMsYUFDQSxJQUFJLENBQUMsS0FBSyxFQUNYLGNBQUssU0FBUyxFQUFDLE1BQU0sR0FBRyxFQUN4QixLQUFDLEtBQUssSUFDTCxTQUFTLEVBQUMsNkJBQTZCLEVBQ3ZDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUM3QixHQUFHLEVBQUMsTUFBTSxFQUNWLEtBQUssRUFBRSxFQUFFLEVBQ1QsTUFBTSxFQUFFLEVBQUUsR0FDVCxJQUNHLENBQ04sQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsUUFBUSxDQUFJLEtBQXdCLEVBQUUsS0FBUTtJQUN0RCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxDQUFDO0lBQ3RELE9BQU8sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM3QixDQUFDO0FBVUQsU0FBUyxRQUFRLENBQUksRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUE2QjtJQUN6RixPQUFPLENBQ04sY0FDQyxTQUFTLEVBQUMsTUFBTSxFQUNoQixLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUMsWUFDZCxjQUFLLFNBQVMsRUFBRSxNQUFNLENBQUMsK0NBQStDLENBQUMsWUFDckUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ3RCLGlCQUNDLFNBQVMsRUFBRSxNQUFNLENBQ2hCLG1FQUFtRSxFQUNuRSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUNuQyxFQUNELElBQUksRUFBQyxRQUFRLEVBRWIsT0FBTyxFQUFFLEdBQUcsRUFBRTtvQkFDYixXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ2pCLE9BQU8sRUFBRSxDQUFDO2dCQUNYLENBQUMsWUFDQSxDQUFDLENBQUMsS0FBSyxJQUxILEdBQUcsQ0FNQSxDQUNULENBQUMsR0FDRyxHQUNELENBQ04sQ0FBQztBQUNILENBQUMifQ==