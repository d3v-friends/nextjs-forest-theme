"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { concat, useRouterTools } from "nextjs-tools";
import Items from "./items.js";
import { useSearchParams } from "next/navigation";
import strconv from "../../../fn/strconv/index.js";
import Dropdown from "../../input/elem/dropdown/index.js";
const DEFAULT_SIZE_LIST = [
    { label: "10 개", value: 10 },
    { label: "30 개", value: 30 },
    { label: "50 개", value: 50 },
];
const { LinkButton, Prev, Next } = Items;
export default function ({ page, size, total, pageKey = "page", sizeKey = "size", className = "", buttons = 2, sizeList = DEFAULT_SIZE_LIST, }) {
    if (total === 0)
        return null;
    if (size === 0)
        return null;
    const params = useSearchParams();
    const router = useRouterTools();
    const last = Math.floor(total / size) + (0 < total % size ? 1 : 0) - 1;
    const left = [];
    const right = [];
    for (let i = 1; i <= buttons; i++) {
        if (0 <= page - i) {
            left.push(page - i);
        }
        if (page + i <= last) {
            right.push(page + i);
        }
    }
    const items = [...left, page, ...right].sort((a, b) => a - b);
    const hasPrev = items.findIndex((v) => v === 0) === -1;
    const hasNext = items.findIndex((v) => v === last) === -1;
    return (_jsxs("div", { className: concat("flex items-center justify-center", className), children: [_jsxs("div", { className: "hidden grow md:flex md:items-center", children: [_jsx(Dropdown, { items: sizeList.map((item) => ({ label: item.label, value: item.value.toString() })), onChange: (value) => {
                            router.pushBySearchParams({ [sizeKey]: value });
                        }, value: params.get(sizeKey) || size.toString() }), _jsxs("div", { className: "text-(--info) pl-2", children: ["\uC804\uCCB4 ", strconv.toSplitNumber(total), " \uAC1C"] })] }), _jsx(Prev, { href: getHref(params.toString(), pageKey, page - buttons - 1), activated: hasPrev }), items.map((value, key) => (_jsx(LinkButton, { href: getHref(params.toString(), pageKey, value), activated: value === page, children: value + 1 }, key))), _jsx(Next, { href: getHref(params.toString(), pageKey, page + buttons + 1), activated: hasNext })] }));
}
function getHref(params, key, value) {
    const next = new URLSearchParams(params);
    next.set(key, value.toString());
    return `?${next.toString()}`;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcC90YWJsZS9wYWdpbmF0aW9uL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsT0FBTyxFQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUMsTUFBTSxjQUFjLENBQUM7QUFDcEQsT0FBTyxLQUFLLE1BQU0sU0FBUyxDQUFDO0FBQzVCLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUNoRCxPQUFPLE9BQU8sTUFBTSxxQkFBcUIsQ0FBQztBQUMxQyxPQUFPLFFBQVEsTUFBTSwyQkFBMkIsQ0FBQztBQWFqRCxNQUFNLGlCQUFpQixHQUFHO0lBQ3pCLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO0lBQzFCLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO0lBQzFCLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFDO0NBQzFCLENBQUM7QUFFRixNQUFNLEVBQUMsVUFBVSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7QUFFdkMsTUFBTSxDQUFDLE9BQU8sV0FBVyxFQUN4QixJQUFJLEVBQ0osSUFBSSxFQUNKLEtBQUssRUFDTCxPQUFPLEdBQUcsTUFBTSxFQUNoQixPQUFPLEdBQUcsTUFBTSxFQUNoQixTQUFTLEdBQUcsRUFBRSxFQUNkLE9BQU8sR0FBRyxDQUFDLEVBQ1gsUUFBUSxHQUFHLGlCQUFpQixHQUNYO0lBQ2pCLElBQUksS0FBSyxLQUFLLENBQUM7UUFBRSxPQUFPLElBQUksQ0FBQztJQUM3QixJQUFJLElBQUksS0FBSyxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFFNUIsTUFBTSxNQUFNLEdBQUcsZUFBZSxFQUFFLENBQUM7SUFDakMsTUFBTSxNQUFNLEdBQUcs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